/*!
* Gollum - 1.0.0-3-gadca62a
* Copyright (c) 2012 Norman Xu <i@qusi.org>
* Licensed MIT
*/
define("gollum",["jquery"],function a(a){function g(b){var c=this;c.opts=b||e,c.ready=f();var d=function(){var b=a(document.createElement("iframe"));return b.attr("src",c.opts.url),b.hide(),b.appendTo(document.body),b}();c._$gollum=d,c._$gollum.bind("load",function(){d[0].contentWindow.__gollumArgs__=[],c.ready.resolve()})}var b="Gollum",c=b+": Required argument is missing.",d=b+": jQuery does not implement Deferred() method.",e={url:"about:blank"},f=a.Deferred;if(!f)throw d;var h=g.prototype;return h.load=function(a){if(!a)throw c;var b=this,d=f();return b.ready.done(function(){var b=this._$gollum[0].contentWindow,c=b.document,e=c.createElement("script");e.src=a,e.completed?d.resolve():e.onload=function(){d.resolve()},c.body.appendChild(e)}),d},h.exec=function(a){if(!a)throw c;var b=this,d=f(),e=a.toString(),g=Array.prototype.slice.call(arguments,1);return b.ready.done(function(){var a=b._$gollum[0].contentWindow,c=a.document;a.__gollumArgs__.push(Array.prototype.slice.call(g));var f="this.__gollumRet__ = ("+e+").apply(this, this.__gollumArgs__.shift());";a.execScript?a.execScript(f):a.eval(f),d.resolve(a.__gollumRet__)}),d},g});